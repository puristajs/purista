import{_ as e}from"./plugin-vue_export-helper.21dcd24c.js";import{o,c,e as s,a as n,r as a}from"./app.5b57730e.js";const i={},u=n('<h1 id="hooks" tabindex="-1"><a class="header-anchor" href="#hooks" aria-hidden="true">#</a> Hooks</h1><p>Hooks are a powerful way to separate technical needs from business logic.<br> There are two different types of hooks:</p><p>There are hooks with return value, which are able to take inputs, execute some logic and return a value.<br> The returned value is then used as input for the next hook or the business function.<br> These hooks are expected to not throw any error and called transform hooks.</p><p>On the other hand, there are hooks which do not return a value. The purpose is to only validate input data, and they are expected to throw HandledError.<br> For better differentiation, hooks without return values called guard hooks.</p><h2 id="service-function-hooks" tabindex="-1"><a class="header-anchor" href="#service-function-hooks" aria-hidden="true">#</a> Service function hooks</h2><p><strong>Example-flow:</strong></p>',6),l=n(`<h3 id="transforminputhook" tabindex="-1"><a class="header-anchor" href="#transforminputhook" aria-hidden="true">#</a> TransformInputHook</h3><p>This transform hook is called before input validation.<br> It allows implementing migrations, decoding or transformation of input message payload and message parameters without touching the main business logic.</p><p>A use case could be, that the message payload is encrypted and needs to be decrypted.<br> Typically, anything like input schema migrations is also a good example for using transform hooks.</p><p>The input types of an input transform hook (payload &amp; parameter) will be automatically set the types for original message payload and parameter.<br> If you&#39;ve set an input validation schema (you should do it always), the result type for the transform input hook is automatically set.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FunctionDefinitionBuilder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@purista/core&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createDecipheriv <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;crypto&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> z <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;zod&#39;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> UserService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../UserService&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inputParameterSchema<span class="token punctuation">,</span> inputPayloadSchema<span class="token punctuation">,</span> outputPayloadSchema <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./schema&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> signUp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./signUp&#39;</span>


<span class="token keyword">const</span> payloadSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  iv<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> parameterSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  algorithm<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  secretKey<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">FunctionDefinitionBuilder<span class="token operator">&lt;</span>UserService<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;signUp&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Sign up a new unknown user&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;NewUserCreated&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addInputSchema</span><span class="token punctuation">(</span>inputPayloadSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addParameterSchema</span><span class="token punctuation">(</span>inputParameterSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addOutputSchema</span><span class="token punctuation">(</span>outputPayloadSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">exposeAsHttpEndpoint</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/sign-up&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">transformInput</span><span class="token punctuation">(</span>payloadSchema<span class="token punctuation">,</span> parameterSchema<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span>_context<span class="token punctuation">,</span> payload<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    
    <span class="token comment">// _originalMessage.command.payload type will become automatically { iv: string; content: string }</span>
    <span class="token comment">// _originalMessage.command.params type will become automatically { algorithm: string; secretKey: string }</span>
    <span class="token comment">// the result type of this function is automatically set, because we set input and parameter schema before</span>

    <span class="token keyword">const</span> decipher <span class="token operator">=</span> <span class="token function">createDecipheriv</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>algorithm<span class="token punctuation">,</span> params<span class="token punctuation">.</span>secretKey<span class="token punctuation">,</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>payload<span class="token punctuation">.</span>iv<span class="token punctuation">,</span> <span class="token string">&#39;hex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> decrpyted <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>decipher<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>payload<span class="token punctuation">.</span>content<span class="token punctuation">,</span> <span class="token string">&#39;hex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> decipher<span class="token punctuation">.</span><span class="token function">final</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      params<span class="token punctuation">,</span>
      payload<span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>decrpyted<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setFunction</span><span class="token punctuation">(</span>signUp<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="beforeguardhook" tabindex="-1"><a class="header-anchor" href="#beforeguardhook" aria-hidden="true">#</a> BeforeGuardHook</h3><p>The before guard hook is extremely useful for any use case where you need to validate authorization/authentication, rate limits and similar things.</p><p>This guard should throw a HandledError, if for example the user is not allowed to execute this function.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FunctionDefinitionBuilder<span class="token punctuation">,</span> HandledError<span class="token punctuation">,</span> StatusCode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@purista/core&#39;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> UserService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../UserService&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  inputParameterSchema<span class="token punctuation">,</span>
  inputPayloadSchema<span class="token punctuation">,</span>
  outputPayloadSchema<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./schema&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> signUp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./signUp&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">FunctionDefinitionBuilder<span class="token operator">&lt;</span>UserService<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;signUp&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Sign up a new unknown user&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;NewUserCreated&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addInputSchema</span><span class="token punctuation">(</span>inputPayloadSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addParameterSchema</span><span class="token punctuation">(</span>inputParameterSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addOutputSchema</span><span class="token punctuation">(</span>outputPayloadSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">exposeAsHttpEndpoint</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/sign-up&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setBeforeGuardHook</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">{</span> logger <span class="token punctuation">}</span><span class="token punctuation">,</span> payload<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>email <span class="token operator">===</span> <span class="token string">&#39;blocked@example.com&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;user not allowed&#39;</span><span class="token punctuation">)</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">HandledError</span><span class="token punctuation">(</span>StatusCode<span class="token punctuation">.</span>Forbidden<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setFunction</span><span class="token punctuation">(</span>signUp<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="afterguardhook" tabindex="-1"><a class="header-anchor" href="#afterguardhook" aria-hidden="true">#</a> AfterGuardHook</h3><p>This guard hook is called after response validation and before AfterTransformHook.</p><p>There are not so much real use cases where it would make sense to use this hook.<br> Example is additional logging and any kind of metrics.</p><p>It is also possible to use this hook for optimization purpose.<br> As an example:</p><p>A function is making a financial transaction and returns the actual balance. You like to inform the user as soon as the balance is below a certain level.<br> You could build a subscription which is listening for all responses of this function. Expecting that only 10% of function responses will result in informing the user, 90% of subscription invocations would waste resources.</p>`,14),r=n(`<p>All hooks will need computation resources and because of this it will increase response time.<br> Also keep in mind that, in case a hook fails, and it is throwing, the business information might be lost or can&#39;t be reproduced.</p><p>In the financial example, prefer a subscription or simply emit some custom event in the after guard hook instead of doing some time-consuming stuff.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FunctionDefinitionBuilder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@purista/core&#39;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> UserService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../UserService&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inputParameterSchema<span class="token punctuation">,</span> inputPayloadSchema<span class="token punctuation">,</span> outputPayloadSchema<span class="token punctuation">,</span> OutputPayloadType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./schema&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> signUp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./signUp&#39;</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">FunctionDefinitionBuilder<span class="token operator">&lt;</span>UserService<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;signUp&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Sign up a new unknown user&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;NewUserCreated&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addInputSchema</span><span class="token punctuation">(</span>inputPayloadSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addParameterSchema</span><span class="token punctuation">(</span>inputParameterSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addOutputSchema</span><span class="token punctuation">(</span>outputPayloadSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">exposeAsHttpEndpoint</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/sign-up&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setAfterGuardHook</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">{</span> logger <span class="token punctuation">}</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// the type of result is automatically set, because we added a output schema before</span>

    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&#39;afterGuardHook1&#39;</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>uuid<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setFunction</span><span class="token punctuation">(</span>signUp<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="transformoutputhook" tabindex="-1"><a class="header-anchor" href="#transformoutputhook" aria-hidden="true">#</a> TransformOutputHook</h3><p>This transform hook is called after output validation and after AfterGuardHook as very last step. It allows implementing migration or encoding of response payload without touching the main business logic.</p><p>Like the InputTransformHook, a good example could be the encryption of the response payload.</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FunctionDefinitionBuilder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@purista/core&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createCipheriv<span class="token punctuation">,</span> randomBytes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;crypto&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> z <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;zod&#39;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> UserService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../UserService&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> inputParameterSchema<span class="token punctuation">,</span> inputPayloadSchema<span class="token punctuation">,</span> outputPayloadSchema <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./schema&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> signUp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./signUp&#39;</span>

<span class="token keyword">const</span> outputSchema <span class="token operator">=</span> z<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  iv<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  content<span class="token operator">:</span> z<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">FunctionDefinitionBuilder<span class="token operator">&lt;</span>UserService<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token string">&#39;signUp&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Sign up a new unknown user&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;NewUserCreated&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addInputSchema</span><span class="token punctuation">(</span>inputPayloadSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addParameterSchema</span><span class="token punctuation">(</span>inputParameterSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">addOutputSchema</span><span class="token punctuation">(</span>outputPayloadSchema<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">exposeAsHttpEndpoint</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/sign-up&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">transformOutput</span><span class="token punctuation">(</span>outputSchema<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>_context<span class="token punctuation">,</span> outputPayload<span class="token punctuation">,</span> _inputPayload<span class="token punctuation">,</span> inputParams<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>outputPayload<span class="token punctuation">)</span>

    <span class="token keyword">const</span> iv <span class="token operator">=</span> <span class="token function">randomBytes</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> cipher <span class="token operator">=</span> <span class="token function">createCipheriv</span><span class="token punctuation">(</span>inputParams<span class="token punctuation">.</span>algorithm<span class="token punctuation">,</span> inputParams<span class="token punctuation">.</span>secretKey<span class="token punctuation">,</span> iv<span class="token punctuation">)</span>

    <span class="token keyword">const</span> encrypted <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>cipher<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">,</span> cipher<span class="token punctuation">.</span><span class="token function">final</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      iv<span class="token punctuation">,</span>
      content<span class="token operator">:</span> encrypted<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">setFunction</span><span class="token punctuation">(</span>signUp<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7);function k(d,m){const t=a("Mermaid"),p=a("Badge");return o(),c("div",null,[u,s(t,{id:"mermaid-382ee14d",code:"flowchart%20TB%0A%20%20%20%20command(((Command)))%20%3D%3D%3E%20%7Cmessage%20unknown%20payload%20%26%20unknown%20params%7C%20inputTransformHook%5BInputTransformHook%5D%0A%20%20%20%20inputTransformHook%20%3D%3D%3E%20%7Cdecoded%2Ftransformed%20typed%20payload%20%26%20params%7CinputValidation%0A%0A%20%20%20%20subgraph%20inputValidation%5Bvalidate%20input%5D%0A%20%20%20%20%20%20%20%20validateInputPayload%5Bvalidate%20payload%5D%0A%20%20%20%20%20%20%20%20validateParamsPayload%5Bvalidate%20parameter%5D%0A%20%20%20%20end%0A%0A%0A%20%20%20%20inputValidation%20%3D%3D%3E%20%7Ctyped%20%26%20validated%20payload%20%26%20params%7C%20beforeGuardHook%0A%0A%20%20%20%20subgraph%20beforeGuardHook%5Bbefore%20guard%20hooks%5D%0A%20%20%20%20%20%20%20%20beforehook1%5BBeforeGuardHook%20check%20permissions%5D%0A%20%20%20%20%20%20%20%20beforehook2%5BBeforeGuardHook%20check%20rate%20limits%5D%0A%20%20%20%20end%0A%20%20%20%20%0A%20%20%20%20beforeGuardHook%3D%3D%3E%7Ctyped%20payload%20%26%20params%7Cfunction%0A%0A%20%20%20%20function%5Bexecute%20the%20function%5D%3D%3D%3E%7Ctyped%20output%20payload%7C%20outputValidation%5Boutput%20validation%5D%0A%20%20%20%20%0A%20%20%20%20outputValidation%20%3D%3D%3E%20%7Ctyped%20and%20validated%20output%20payload%7C%20afterGuardHook%0A%0A%20%20%20%20subgraph%20afterGuardHook%5Bafter%20guard%20hooks%5D%0A%20%20%20%20%20%20%20%20afterhook1%5BafterGuardHook%20check%20permissions%5D%0A%20%20%20%20%20%20%20%20afterhook2%5BafterGuardHook%20check%20rate%20limits%5D%0A%20%20%20%20end%0A%0A%20%20%20%20afterGuardHook%20%3D%3D%3E%20outputTransformHook%0A%20%20%20%0A%20%20%20%20outputTransformHook%3D%3D%3E%7Cencode%2Ftransform%20output%20payload%7C%20successResponse(((SuccessResponse)))%0A%0A%20%0A"}),l,s(p,{text:"Be aware",type:"warning"}),r])}var f=e(i,[["render",k],["__file","4_hooks.html.vue"]]);export{f as default};
