import{_ as t,c as e,o as i,V as a}from"./chunks/framework.ITQiifkM.js";const y=JSON.parse('{"title":"Module: @purista/infisical-secret-store","description":"","frontmatter":{},"headers":[],"relativePath":"api/modules/purista_infisical_secret_store.md","filePath":"api/modules/purista_infisical_secret_store.md","lastUpdated":1708221737000}'),s={name:"api/modules/purista_infisical_secret_store.md"},l=a(`<p><a href="./../README.html">PURISTA API</a> / <a href="./../modules.html">Modules</a> / @purista/infisical-secret-store</p><h1 id="module-purista-infisical-secret-store" tabindex="-1">Module: @purista/infisical-secret-store <a class="header-anchor" href="#module-purista-infisical-secret-store" aria-label="Permalink to &quot;Module: @purista/infisical-secret-store&quot;">​</a></h1><p>A secret store for using <a href="https://infisical.com/" target="_blank" rel="noreferrer">Infisical</a> as storage.</p><p>For performance reasons, and to reduce costs, the secret values are cached in memory after first fetch.</p><p>You can disable the whole caching via config by setting enableCache to false.<br> If the cache is enabled, you can set the ttl for cached secret values via config cacheTtl (in ms).</p><p>This will return the cached secret if available and if ttl is not exceeded.<br> If a secret value exceeds the ttl, it does not automatically get removed from cache.<br> It will be removed/overwritten on next get request.</p><p><strong><code>Example</code></strong></p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bearerToken: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;YOUR_INFISICAL_TOKEN&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  baseUrl: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://app.infisical.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InfisicalSecretStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ config })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setSecret</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mySecret&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;value&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSecret</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mySecret&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// outputs: { mySecret: &#39;value&#39; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeSecret</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mySecret&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSecret</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mySecret&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// outputs: undefined</span></span></code></pre></div><h2 id="table-of-contents" tabindex="-1">Table of contents <a class="header-anchor" href="#table-of-contents" aria-label="Permalink to &quot;Table of contents&quot;">​</a></h2><h3 id="classes" tabindex="-1">Classes <a class="header-anchor" href="#classes" aria-label="Permalink to &quot;Classes&quot;">​</a></h3><ul><li><a href="./../classes/purista_infisical_secret_store.InfisicalClient.html">InfisicalClient</a></li><li><a href="./../classes/purista_infisical_secret_store.InfisicalSecretStore.html">InfisicalSecretStore</a></li></ul><h3 id="type-aliases" tabindex="-1">Type Aliases <a class="header-anchor" href="#type-aliases" aria-label="Permalink to &quot;Type Aliases&quot;">​</a></h3><ul><li><a href="./purista_infisical_secret_store.html#clientconfig">ClientConfig</a></li><li><a href="./purista_infisical_secret_store.html#decryptinput">DecryptInput</a></li><li><a href="./purista_infisical_secret_store.html#encryptinput">EncryptInput</a></li><li><a href="./purista_infisical_secret_store.html#httpclientconfigcustom">HttpClientConfigCustom</a></li><li><a href="./purista_infisical_secret_store.html#infisicalsecretconfig">InfisicalSecretConfig</a></li><li><a href="./purista_infisical_secret_store.html#scope">Scope</a></li><li><a href="./purista_infisical_secret_store.html#secret">Secret</a></li><li><a href="./purista_infisical_secret_store.html#tokendata">TokenData</a></li></ul><h3 id="variables" tabindex="-1">Variables <a class="header-anchor" href="#variables" aria-label="Permalink to &quot;Variables&quot;">​</a></h3><ul><li><a href="./purista_infisical_secret_store.html#puristaversion">puristaVersion</a></li></ul><h2 id="type-aliases-1" tabindex="-1">Type Aliases <a class="header-anchor" href="#type-aliases-1" aria-label="Permalink to &quot;Type Aliases&quot;">​</a></h2><h3 id="clientconfig" tabindex="-1">ClientConfig <a class="header-anchor" href="#clientconfig" aria-label="Permalink to &quot;ClientConfig&quot;">​</a></h3><p>Ƭ <strong>ClientConfig</strong>: <a href="./purista_core.html#prettify"><code>Prettify</code></a>&lt;<code>Required</code>&lt;<code>Pick</code>&lt;<a href="./purista_core.html#httpclientconfig"><code>HttpClientConfig</code></a>&lt;<a href="./purista_infisical_secret_store.html#httpclientconfigcustom"><code>HttpClientConfigCustom</code></a>&gt;, <code>&quot;bearerToken&quot;</code>&gt;&gt; &amp; <code>Omit</code>&lt;<a href="./purista_core.html#httpclientconfig"><code>HttpClientConfig</code></a>&lt;<a href="./purista_infisical_secret_store.html#httpclientconfigcustom"><code>HttpClientConfigCustom</code></a>&gt;, <code>&quot;bearerToken&quot;</code>&gt;&gt;</p><h4 id="defined-in" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/InfisicalClient/types/ClientConfig.ts#L5" target="_blank" rel="noreferrer">infisical-secret-store/src/InfisicalClient/types/ClientConfig.ts:5</a></p><hr><h3 id="decryptinput" tabindex="-1">DecryptInput <a class="header-anchor" href="#decryptinput" aria-label="Permalink to &quot;DecryptInput&quot;">​</a></h3><p>Ƭ <strong>DecryptInput</strong>: <code>Object</code></p><h4 id="type-declaration" tabindex="-1">Type declaration <a class="header-anchor" href="#type-declaration" aria-label="Permalink to &quot;Type declaration&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>ciphertext</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>iv</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secret</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>tag</code></td><td style="text-align:left;"><code>string</code></td></tr></tbody></table><h4 id="defined-in-1" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-1" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/InfisicalClient/types/DecryptInput.ts#L1" target="_blank" rel="noreferrer">infisical-secret-store/src/InfisicalClient/types/DecryptInput.ts:1</a></p><hr><h3 id="encryptinput" tabindex="-1">EncryptInput <a class="header-anchor" href="#encryptinput" aria-label="Permalink to &quot;EncryptInput&quot;">​</a></h3><p>Ƭ <strong>EncryptInput</strong>: <code>Object</code></p><h4 id="type-declaration-1" tabindex="-1">Type declaration <a class="header-anchor" href="#type-declaration-1" aria-label="Permalink to &quot;Type declaration&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>secret</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>text</code></td><td style="text-align:left;"><code>string</code></td></tr></tbody></table><h4 id="defined-in-2" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-2" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/InfisicalClient/types/EncryptInput.ts#L1" target="_blank" rel="noreferrer">infisical-secret-store/src/InfisicalClient/types/EncryptInput.ts:1</a></p><hr><h3 id="httpclientconfigcustom" tabindex="-1">HttpClientConfigCustom <a class="header-anchor" href="#httpclientconfigcustom" aria-label="Permalink to &quot;HttpClientConfigCustom&quot;">​</a></h3><p>Ƭ <strong>HttpClientConfigCustom</strong>: <code>Object</code></p><h4 id="defined-in-3" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-3" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/InfisicalClient/types/ClientConfig.ts#L3" target="_blank" rel="noreferrer">infisical-secret-store/src/InfisicalClient/types/ClientConfig.ts:3</a></p><hr><h3 id="infisicalsecretconfig" tabindex="-1">InfisicalSecretConfig <a class="header-anchor" href="#infisicalsecretconfig" aria-label="Permalink to &quot;InfisicalSecretConfig&quot;">​</a></h3><p>Ƭ <strong>InfisicalSecretConfig</strong>: <a href="./purista_infisical_secret_store.html#clientconfig"><code>ClientConfig</code></a></p><h4 id="defined-in-4" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-4" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/types.ts#L3" target="_blank" rel="noreferrer">infisical-secret-store/src/types.ts:3</a></p><hr><h3 id="scope" tabindex="-1">Scope <a class="header-anchor" href="#scope" aria-label="Permalink to &quot;Scope&quot;">​</a></h3><p>Ƭ <strong>Scope</strong>: <code>Object</code></p><h4 id="type-declaration-2" tabindex="-1">Type declaration <a class="header-anchor" href="#type-declaration-2" aria-label="Permalink to &quot;Type declaration&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>_id</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>environment</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretPath</code></td><td style="text-align:left;"><code>string</code></td></tr></tbody></table><h4 id="defined-in-5" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-5" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/InfisicalClient/types/Scope.ts#L1" target="_blank" rel="noreferrer">infisical-secret-store/src/InfisicalClient/types/Scope.ts:1</a></p><hr><h3 id="secret" tabindex="-1">Secret <a class="header-anchor" href="#secret" aria-label="Permalink to &quot;Secret&quot;">​</a></h3><p>Ƭ <strong>Secret</strong>: <code>Object</code></p><h4 id="type-declaration-3" tabindex="-1">Type declaration <a class="header-anchor" href="#type-declaration-3" aria-label="Permalink to &quot;Type declaration&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>_id</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>createdAt</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>environment</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretCommentCiphertext?</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretCommentIV?</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretCommentTag?</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretKeyCiphertext</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretKeyIV</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretKeyTag</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretValueCiphertext</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretValueIV</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>secretValueTag</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>type</code></td><td style="text-align:left;"><code>&quot;shared&quot;</code> | <code>&quot;personal&quot;</code></td></tr><tr><td style="text-align:left;"><code>updatedAt</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>user?</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>version</code></td><td style="text-align:left;"><code>number</code></td></tr><tr><td style="text-align:left;"><code>workspace</code></td><td style="text-align:left;"><code>string</code></td></tr></tbody></table><h4 id="defined-in-6" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-6" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/InfisicalClient/types/Secret.ts#L1" target="_blank" rel="noreferrer">infisical-secret-store/src/InfisicalClient/types/Secret.ts:1</a></p><hr><h3 id="tokendata" tabindex="-1">TokenData <a class="header-anchor" href="#tokendata" aria-label="Permalink to &quot;TokenData&quot;">​</a></h3><p>Ƭ <strong>TokenData</strong>: <code>Object</code></p><h4 id="type-declaration-4" tabindex="-1">Type declaration <a class="header-anchor" href="#type-declaration-4" aria-label="Permalink to &quot;Type declaration&quot;">​</a></h4><table><thead><tr><th style="text-align:left;">Name</th><th style="text-align:left;">Type</th></tr></thead><tbody><tr><td style="text-align:left;"><code>_id</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>createdAt</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>encryptedKey</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>expiresAt</code></td><td style="text-align:left;"><code>Date</code></td></tr><tr><td style="text-align:left;"><code>iv</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>lastUsed</code></td><td style="text-align:left;"><code>Date</code></td></tr><tr><td style="text-align:left;"><code>name</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>permissions</code></td><td style="text-align:left;"><code>string</code>[]</td></tr><tr><td style="text-align:left;"><code>scopes</code></td><td style="text-align:left;"><a href="./purista_infisical_secret_store.html#scope"><code>Scope</code></a>[]</td></tr><tr><td style="text-align:left;"><code>serviceAccount</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>tag</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>updatedAt</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>user</code></td><td style="text-align:left;">{ <code>_id</code>: <code>string</code> ; <code>authMethods</code>: <code>string</code>[] ; <code>email</code>: <code>string</code> ; <code>firstName</code>: <code>string</code> ; <code>lastName</code>: <code>string</code> }</td></tr><tr><td style="text-align:left;"><code>user._id</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>user.authMethods</code></td><td style="text-align:left;"><code>string</code>[]</td></tr><tr><td style="text-align:left;"><code>user.email</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>user.firstName</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>user.lastName</code></td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;"><code>workspace</code></td><td style="text-align:left;"><code>string</code></td></tr></tbody></table><h4 id="defined-in-7" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-7" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/InfisicalClient/types/TokenData.ts#L3" target="_blank" rel="noreferrer">infisical-secret-store/src/InfisicalClient/types/TokenData.ts:3</a></p><h2 id="variables-1" tabindex="-1">Variables <a class="header-anchor" href="#variables-1" aria-label="Permalink to &quot;Variables&quot;">​</a></h2><h3 id="puristaversion" tabindex="-1">puristaVersion <a class="header-anchor" href="#puristaversion" aria-label="Permalink to &quot;puristaVersion&quot;">​</a></h3><p>• <code>Const</code> <strong>puristaVersion</strong>: <code>&quot;1.10.6&quot;</code></p><h4 id="defined-in-8" tabindex="-1">Defined in <a class="header-anchor" href="#defined-in-8" aria-label="Permalink to &quot;Defined in&quot;">​</a></h4><p><a href="https://github.com/sebastianwessel/purista/blob/master/packages/infisical-secret-store/src/version.ts#L1" target="_blank" rel="noreferrer">infisical-secret-store/src/version.ts:1</a></p>`,70),n=[l];function r(d,o,c,h,p,f){return i(),e("div",null,n)}const k=t(s,[["render",r]]);export{y as __pageData,k as default};
